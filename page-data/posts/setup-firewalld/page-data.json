{"componentChunkName":"component---src-templates-post-template-jsx","path":"/posts/setup-firewalld","webpackCompilationHash":"84f3e792efc718b8a12e","result":{"data":{"site":{"siteMetadata":{"title":"dongjinjo","subtitle":"","copyright":"© All rights reserved.","menu":[{"label":"Articles","path":"/"},{"label":"Categories","path":"/categories/"},{"label":"Tags","path":"/tags/"}],"author":{"name":"dongjin jo","twitter":"#"},"disqusShortname":"","url":"https://dongjinjo.github.io"}},"markdownRemark":{"id":"9215d284-aa14-5de4-81d8-faab9835719f","html":"<blockquote>\n<p>방화벽(firewalld) 설정 가이드</p>\n</blockquote>\n<h2>서비스 제어</h2>\n<table>\n<thead>\n<tr>\n<th>명령어</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>service firewalld start</td>\n<td>service 시작</td>\n</tr>\n<tr>\n<td>service firewalld stop</td>\n<td>service 중지</td>\n</tr>\n<tr>\n<td>firewall-cmd --reload</td>\n<td>재시작</td>\n</tr>\n</tbody>\n</table>\n<h2>목록 조회</h2>\n<table>\n<thead>\n<tr>\n<th>명령어</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>firewall-cmd --list-all</td>\n<td>default zone 설정 정보</td>\n</tr>\n<tr>\n<td>firewall-cmd --list-all-zones</td>\n<td>전체 zone 설정 정보</td>\n</tr>\n<tr>\n<td>firewall-cmd --list-all —zone=dmz</td>\n<td>특정 zone 설정 정보</td>\n</tr>\n<tr>\n<td>firewall-cmd --get-zones</td>\n<td>zone 목록</td>\n</tr>\n<tr>\n<td>firewall-cmd --get-default-zone</td>\n<td>default zone 이름</td>\n</tr>\n<tr>\n<td>firewall-cmd --get-services</td>\n<td>사전 정의 service 목록</td>\n</tr>\n</tbody>\n</table>\n<h2>추가 &#x26; 삭제</h2>\n<p><strong>--zone=&#x3C;zone></strong>\n--zone=&#x3C;zone> 옵션이 없을 경우 default zone에 추가, 삭제 됩니다.\n{: .notice—info}</p>\n<p>{% capture notice-2 %}\n<strong>--permanent</strong>\nfirewall-cmd 로 방화벽 정책을 변경 시  즉시 적용되지만 reload 하거나 재부팅 할 경우 정책이 초기화됩니다.\n방화벽 정책을 영구적으로 적용하기 위해서는 --permanent 옵션을 사용해야 합니다. 옵션을 사용할 경우 즉시 적용 되지 않아 reload를 수행해야 합니다. </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n<th align=\"center\">—permanent 옵션 사용</th>\n<th align=\"center\">—permanent 옵션 미사용</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">즉시 적용</td>\n<td align=\"center\">X</td>\n<td align=\"center\">O</td>\n</tr>\n<tr>\n<td align=\"center\">정책 영구적용</td>\n<td align=\"center\">O</td>\n<td align=\"center\">X</td>\n</tr>\n</tbody>\n</table>\n<p>{% endcapture %}</p>\n<div class=\"notice--info\">{{ notice-2 | markdownify }}</div>\n<table>\n<thead>\n<tr>\n<th>명령어</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>firewall-cmd --add-service=ssh</td>\n<td>ssh service 추가</td>\n</tr>\n<tr>\n<td>firewall-cmd --remove-service=ssh</td>\n<td>ssh service 삭제</td>\n</tr>\n<tr>\n<td>firewall-cmd --add-port=21/tcp</td>\n<td>tcp(21) port 추가</td>\n</tr>\n<tr>\n<td>firewall-cmd --remove-port=21/tcp</td>\n<td>tcp(21) port 삭제</td>\n</tr>\n<tr>\n<td>firewall-cmd --add-source=192.168.0.0/24</td>\n<td>source ip 추가</td>\n</tr>\n<tr>\n<td>firewall-cmd --remove-source=192.168.0.0/24</td>\n<td>source ip 삭제</td>\n</tr>\n</tbody>\n</table>\n<h2>rich rule</h2>\n<h3>rich rule 규칙</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">rule\n  <span class=\"token punctuation\">[</span>family<span class=\"token operator\">=</span><span class=\"token string\">\"ipv4|ipv6\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span>source <span class=\"token punctuation\">[</span>not<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">address</span><span class=\"token operator\">=</span><span class=\"token string\">\"address[/mask]\"</span><span class=\"token operator\">|</span><span class=\"token assign-left variable\">mac</span><span class=\"token operator\">=</span><span class=\"token string\">\"mac-address\"</span><span class=\"token operator\">|</span><span class=\"token assign-left variable\">ipset</span><span class=\"token operator\">=</span><span class=\"token string\">\"ipset\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span>destination <span class=\"token punctuation\">[</span>not<span class=\"token punctuation\">]</span> <span class=\"token assign-left variable\">address</span><span class=\"token operator\">=</span>\"address<span class=\"token punctuation\">[</span>/mask<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n  <span class=\"token function\">service</span><span class=\"token operator\">|</span>port<span class=\"token operator\">|</span>protocol<span class=\"token operator\">|</span>icmp-block<span class=\"token operator\">|</span>icmp-type<span class=\"token operator\">|</span>masquerade<span class=\"token operator\">|</span>forward-port<span class=\"token operator\">|</span>source-port\n  <span class=\"token punctuation\">[</span>log<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span>audit<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">[</span>accept<span class=\"token operator\">|</span>reject<span class=\"token operator\">|</span>drop<span class=\"token operator\">|</span>mark<span class=\"token punctuation\">]</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>명령어</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>firewall-cmd --add-rich-rule=‘rule ~’</td>\n<td>rich rule 추가</td>\n</tr>\n<tr>\n<td>firewall-cmd --remove-rich-rule=‘rule ~’</td>\n<td>rich rule 삭제</td>\n</tr>\n</tbody>\n</table>\n<h3>rich rule 예제</h3>\n<h4>특정 대역에 대한 모든 연결 허용</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">firewall-cmd --add-rich-rule<span class=\"token operator\">=</span><span class=\"token string\">'rule family=\"ipv4\" source address=\"192.168.0.0/24\" accept'</span></code></pre></div>\n<h4>특정 IP에 대한 모든 연결 거부</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">firewall-cmd --add-rich-rule<span class=\"token operator\">=</span><span class=\"token string\">'rule family=\"ipv4\" source address=\"192.168.0.10/32\" reject'</span>  </code></pre></div>\n<h4>특정 대역에 대한 22 port 연결 허용</h4>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">firewall-cmd --add-rich-rule<span class=\"token operator\">=</span><span class=\"token string\">'rule family=\"ipv4\" source address=\"192.168.0.0/24\" port port=\"22\" protocol=\"tcp\" accept'</span></code></pre></div>","fields":{"categorySlug":"/categories/firewall/","tagSlugs":["/tags/firewalld/","/tags/firewall-cmd/"],"slug":"/posts/setup-firewalld"},"frontmatter":{"title":"방화벽(firewalld) 설정","tags":["firewalld","firewall-cmd"],"date":"2018-09-19T00:00:00.000Z","category":"firewall","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/setup-firewalld"}}}