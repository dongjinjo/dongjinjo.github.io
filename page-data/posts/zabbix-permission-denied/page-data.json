{"componentChunkName":"component---src-templates-post-template-jsx","path":"/posts/zabbix-permission-denied","webpackCompilationHash":"3e174f4c8a71584503a2","result":{"data":{"site":{"siteMetadata":{"title":"dongjinjo","subtitle":"","copyright":"© All rights reserved.","menu":[{"label":"Articles","path":"/"},{"label":"Categories","path":"/categories/"},{"label":"Tags","path":"/tags/"}],"author":{"name":"dongjin jo","twitter":"#"},"disqusShortname":"","url":"https://dongjinjo.github.io"}},"markdownRemark":{"id":"aabf1308-4d6b-57b6-87da-036de7b9a172","html":"<blockquote>\n<p>zabbix를 이용한 log file 모니터링 시 발생 하는 Permission Denied 오류 수정</p>\n</blockquote>\n<h2>현상</h2>\n<p>Item(<code class=\"language-text\">log</code>) 등록 후 Permission Denied 오류 발생\n![img01]({{ “/assets/images/2018-09-04-zabbix-permission-denied-03.png” | absolute_url }})</p>\n<h2>원인</h2>\n<p><code class=\"language-text\">zabbix</code> 계정이 해당 file에 접근 할 수 없어 Permission Denied 오류 발생.</p>\n<p>zabbix agent를 통해 수행 되는 명령은 <code class=\"language-text\">zabbix</code> 계정으로 수행\n{: .notice—info}</p>\n<h2>해결 방안</h2>\n<p>log file 그룹에 <code class=\"language-text\">zabbix</code> 추가.</p>\n<h3>1. zabbix 계정 권한 및 그룹 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># id zabbix </span>\n<span class=\"token assign-left variable\">uid</span><span class=\"token operator\">=</span><span class=\"token number\">129</span><span class=\"token punctuation\">(</span>zabbix<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">gid</span><span class=\"token operator\">=</span><span class=\"token number\">135</span><span class=\"token punctuation\">(</span>zabbix<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">groups</span><span class=\"token operator\">=</span><span class=\"token number\">135</span><span class=\"token punctuation\">(</span>zabbix<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>2. log file 계정 및 그룹 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># ls -al /var/log/mysql/mysqld.log</span>\n-rw-r----- <span class=\"token number\">1</span> mysql adm <span class=\"token number\">0</span> Sep  <span class=\"token number\">4</span> 00:00 /var/log/mysql/mysqld.log</code></pre></div>\n<h3>3. log file 그룹(adm)에 zabbix 계정 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># usermod -G adm zabbix</span>\n<span class=\"token comment\"># id zabbix</span>\n<span class=\"token assign-left variable\">uid</span><span class=\"token operator\">=</span><span class=\"token number\">129</span><span class=\"token punctuation\">(</span>zabbix<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">gid</span><span class=\"token operator\">=</span><span class=\"token number\">135</span><span class=\"token punctuation\">(</span>zabbix<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">groups</span><span class=\"token operator\">=</span><span class=\"token number\">135</span><span class=\"token punctuation\">(</span>zabbix<span class=\"token punctuation\">)</span>,4<span class=\"token punctuation\">(</span>adm<span class=\"token punctuation\">)</span></code></pre></div>","fields":{"categorySlug":"/categories/zabbix/","tagSlugs":["/tags/zabbix/","/tags/monitoring/"],"slug":"/posts/zabbix-permission-denied"},"frontmatter":{"title":"log file 모니터링 시 Permission Denied 오류 수정","tags":["zabbix","monitoring"],"date":"2018-09-04T00:00:00.000Z","category":"zabbix","description":""}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/zabbix-permission-denied"}}}